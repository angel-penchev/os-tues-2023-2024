# Тема 2: Структура на операционните системи

## Съдържание
1. [Цели на операционните системи](#1-цели-на-операционните-системи)
2. [Структура на операционните системи](#2-структура-на-операционните-системи)
3. [Отговорности на ядрото](#3-отговорности-на-ядрото)
4. [Управление на процесите (Process Management)](#4-управление-на-процесите-process-management)
5. [Управление на паметта (Memory Managment)](#5-управление-на-паметта-memory-managment)
6. [Управление на входно-изходните устройства (I/O Management)](#6-управление-на-входно-изходните-устройства-io-management)
7. [Управление на външно-запаметяващите устройства (Storage Management)](#7-управление-на-външно-запаметяващите-устройства-storage-management)
8. [Имплементация на защитна сигурност (Security)](#8-имплементация-на-защитна-сигурност-security)

---

## 1. Цели на операционните системи
- Многозадачност
    - Модерните операционни системи трябва да позволяват паралелното изпълнение на програми.
    - Обработката на инструкции от централния процесор, обаче, е последователна.
    - Илюзията за многозадачност (паралелно изпълнение) се постига чрез използване на таймери, които генерират прекъсвания на определено време (интервал).
    - Прекъсвания сменят процеса (задачата), която се изпълнява от процесора. Това се нарича *времеделние*.
    - Процесите изпълняващи се на един процесор се сменят на много кратко време, в зависимост от приоритета им, като времеделението се извършва чрез таймери, които генерират прекъсвания на определено време (интервал).
    - В днешно време, процесорите често имат по няколко ядра, които могат да изпълняват задачи едновременно (може да ги разглеждаме като няколко процесора в една компютърна система).
    - Върху всяко ядро се реализира времеделение.
- Многопотребителност
    - Компютрите много често се използват от няколко потребители.
    - Многопотребителността е способността на операционната система да поддържа различни (множество) потребители.

## 2. Структура на операционните системи
Операционната система може да се раздели на две части:
- Ядро (Kernel)
    - Най-ниското ниво на една операционна система
    - Отговаря за управлението на различните части на една компютърна система - т.е. директно управлява хардуера
    - Това е единственият компонент, който може да работи в привилегиран режим (privileged mode) на процесора (виж Тема 1., т.8).
    - Ядрото съдържа всички драйвери за устройствата (софтуер за оправляване на устройствата), които се намират в компютърната система.
    - Ядрото предоставя и функции, наречени **системни повиквания** (на англ. system calls или на кратко sys-calls), които могат да се извикват от потребителските програми или от други части на операционната система. Някои типове системни функции са следните:
        - Функции за управление на процесите – `fork()`, `waitpid()`, `execvpe()`, `exit()`, т.н.
        - Функции за работа с файлове – `open()`, `close()`, `read()`, `write()`, `lseek()`, т.н.
        - Работа с файловата система – `stat()`, `mkdir()`, `rmdir()`, `link()`, `unlink()`, `mount()`, `umount()`, `chmod()`.
        - и други.
    
- Обвивка (Shell)
    - Командния интерпретатор е набор от приложни програми, които комуникират с ядрото чрез системни извиквания.
    - Предоставя среда и интерфейс за улеснена работа с операционната, както на хора, така и на други приложни програми.
    - Това е видимият потребителски интерфейс на операционната система.
    - Обикновено се зарежда върху нея и предлага на потребителите команди, които им осигуряват достъпа до операционната система - примерно както GNU+Linux са неразделни части на една цяла система - GNU - shell, Linux - kernel.

## 3. Отговорности на ядрото
Понеже ядрото седи между обвивката и хардуера на компютърната система, то следи и отговаря за следните аспекти на компютърната система:
- Управление на процесите (Process Management) 
- Управление на паметта (Memory Management)
- Управление на входно-изходните устройства (I/O Management)
- Управление на външно-запаметяващите устройства (Storage Management)
- Имплементация на защитна сигурност (Security)

## 4. Управление на процесите (Process Management)

## 5. Управление на паметта (Memory Managment)

## 6. Управление на входно-изходните устройства (I/O Management)

## 7. Управление на външно-запаметяващите устройства (Storage Management)

## 8. Имплементация на защитна сигурност (Security)

![Многослойно разделяне на ядро](./assets/privilage_rings.svg)<br>
Многослойно разделяне на ядро